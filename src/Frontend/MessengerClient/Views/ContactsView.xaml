<!-- PSEUDO-CODE - Sprint 8: Contacts View -->
<UserControl x:Class="SecureMessenger.Client.Views.ContactsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" 
                  Text="Kontakte" 
                  FontSize="24" 
                  FontWeight="Bold" 
                  Margin="0,0,0,20"/>

        <TextBox Grid.Row="1"
                materialDesign:HintAssist.Hint="Kontakte durchsuchen..."
                Text="{Binding SearchQuery, UpdateSourceTrigger=PropertyChanged}"
                Style="{StaticResource MaterialDesignOutlinedTextBox}"
                Margin="0,0,0,20">
            <TextBox.InputBindings>
                <KeyBinding Key="Enter" Command="{Binding RefreshContactsCommand}"/>
            </TextBox.InputBindings>
        </TextBox>

        <ListBox Grid.Row="2" 
                ItemsSource="{Binding Contacts}"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Margin="0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Ellipse Grid.Column="0" 
                                Width="10" 
                                Height="10" 
                                VerticalAlignment="Center"
                                Margin="0,0,10,0">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <Setter Property="Fill" Value="Gray"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsOnline}" Value="True">
                                            <Setter Property="Fill" Value="LimeGreen"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="{Binding DisplayName}" 
                                      FontWeight="Bold" 
                                      FontSize="14"/>
                            <TextBlock Text="{Binding Email}" 
                                      FontSize="12" 
                                      Foreground="Gray"/>
                        </StackPanel>

                        <Button Grid.Column="2" 
                               Content="Entfernen"
                               Command="{Binding DataContext.RemoveContactCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                               CommandParameter="{Binding}"
                               Style="{StaticResource MaterialDesignFlatButton}"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</UserControl>
